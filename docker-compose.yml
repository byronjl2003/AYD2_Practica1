version: '3.7'
volumes: 
  mysql-db-data:
    name: mysql-db-data
services:
  frontend:    
    build: 
      dockerfile: Dockerfile
      context: ./frontend      
    environment: 
      - HOST_API=backend #IP PARA CONSUMIR LA API
      - PORT_API=80        #PUERTO DE API      
      - PORT=3000
    ports:
      - '4000:3000'  
    depends_on:
      - backend
  backend:
    build: 
      dockerfile: Dockerfile 
      context: ./backend
    environment: 
      - HOST=mysql-db #IP DE LA BASE DE DATOS
      - PORT=80          #PUERTO DONDE CORREO EL BACKEND
    ports:
      - '8080:80'  #PUERTO DONDE CORREO EL BACKEND
    depends_on:
      - mysql-db
  mysql-db:
    #hostname: db
    build: 
      dockerfile: Dockerfile
      context: ./mysql-db
      
    ports: 
      - '3306:3306'
    volumes: 
      - 'mysql-db-data:/var/lib/mysql'